{%- import 'common.jinja2' as common -%}
---
test-suites:
#  schedulers:
#    test_integration_failures.py::test_cluster_create_failure:
#      dimensions:
#        - regions: ["ap-south-1"]
#          instances: ["c5.large"]
#          oss: ["alinux2"]
#          schedulers: ["slurm"]
#    test_integration_failures.py::test_cluster_create_failure:
#      dimensions:
#        - regions: ["us-east-1"]
#          instances: ["c5.large"]
#          oss: ["alinux2"]
#          schedulers: ["slurm"]
#    test_integration_failures.py::test_cluster_failure:
#      dimensions:
#        - regions: ["us-east-1"]
#          instances: ["c5.large"]
#          oss: ["alinux2"]
#          schedulers: ["slurm"]
#    test_clusters.py::test_cluster_creation:
#      dimensions:
#        - regions: ["us-east-1"]
#          instances: ["c5.large"]
#          oss: ["alinux2"]
#          schedulers: ["slurm"]
#    test_clusters.py::test_ice_failure:
#      dimensions:
#          - regions: ["eu-west-2"]
#            instances: ["c5.large"]
#            oss: ["alinux2"]
#            schedulers: ["slurm"]
#    test_slurm.py::test_slurm:
#      dimensions:
#        - regions: ["us-east-1"]
#          instances: ["c5.large"]
#          oss: ["alinux2"]
#          schedulers: ["slurm"]
#    test_slurm.py::test_slurm_protected_mode_on_cluster_create:
#      dimensions:
#        - regions: ["us-east-1"]
#          instances: ["c5.large"]
#          oss: ["alinux2"]
#          schedulers: ["slurm"]
#  cloudwatch_logging:
#    test_compute_console_output_logging.py::test_custom_action_error:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: ["alinux2"]
#          instances: ["c5.xlarge"]
#          schedulers: ["slurm"]
#    test_compute_console_output_logging.py::test_compute_console_logging:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: ["alinux2"]
#          instances: ["c5.xlarge"]
#          schedulers: ["slurm"]
#    test_compute_console_output_logging.py::test_console_output_with_monitoring_disabled:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: ["alinux2"]
#          instances: ["c5.xlarge"]
#          schedulers: ["slurm"]
#    test_compute_console_output_logging.py::test_console_output_with_monitoring_disabled:
#      dimensions:
#        - regions: ["us-east-1"]
#          instances: {{ common.INSTANCES_DEFAULT_X86 }}
#          oss: ["alinux2"]
#          schedulers: ["slurm"]
#    test_compute_console_output_logging.py::test_custom_action_error:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: {{ common.OSS_COMMERCIAL_X86 }}
#          instances: {{ common.INSTANCES_DEFAULT_X86 }}
#          schedulers: ["slurm"]
#        - regions: ["us-east-1"]
#          instances: {{ common.INSTANCES_DEFAULT_ARM }}
#          oss: {{ common.OSS_COMMERCIAL_ARM }}
#          schedulers: ["slurm"]
#  networking:
#    test_cluster_networking.py::test_cluster_in_private_subnet:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: ["alinux2"]
#          instances: ["c5.xlarge"]
#          schedulers: ["slurm"]
#    test_cluster_networking.py::test_existing_eip:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: ["alinux2"]
#          instances: ["c5.xlarge"]
#          schedulers: ["slurm"]
#    test_networking.py::test_public_network_topology:
#      dimensions:
#        - regions: ["us-east-1"]
#    test_networking.py::test_public_private_network_topology:
#      dimensions:
#        - regions: ["us-east-1"]
#    test_cluster_networking.py::test_cluster_in_no_internet_subnet:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: ["alinux2"]
#          instances: ["c5.xlarge"]
#          schedulers: ["slurm"]
#    test_multi_cidr.py::test_multi_cidr:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: ["alinux2"]
#          instances: ["c5.xlarge"]
#          schedulers: ["slurm"]
#    test_security_groups.py::test_additional_sg_and_ssh_from:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: ["alinux2"]
#          instances: ["c5.xlarge"]
#          schedulers: ["slurm"]
#    test_security_groups.py::test_overwrite_sg:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: ["alinux2"]
#          instances: ["c5.xlarge"]
#          schedulers: ["slurm"]
  create:
    test_create.py::test_create_wrong_os:
      dimensions:
        - regions: ["us-east-1"]
          oss: ["ubuntu1804"]  # os must be different from ubuntu2004 to test os validation logic when wrong os is provided
          instances: ["c5.xlarge"]
          schedulers: ["slurm"]
#    test_create.py::test_create_wrong_pcluster_version:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: ["alinux2"]
#          instances: ["c5.xlarge"]
#          schedulers: ["slurm"]
#    test_create.py::test_create_imds_secured:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: ["alinux2"]
#          instances: ["c5.xlarge"]
#          schedulers: ["slurm"]
#    test_create.py::test_cluster_creation_with_problematic_preinstall_script:
#      dimensions:
#        - regions: [ "us-east-1" ]
#          oss: [ "alinux2" ]
#          instances: [ "c5.xlarge" ]
#          schedulers: [ "slurm" ]
#    test_create.py::test_cluster_creation_timeout:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: ["alinux2"]
#          instances: ["c5.xlarge"]
#          schedulers: ["slurm"]
#    test_create.py::test_cluster_creation_with_invalid_ebs:
#      dimensions:
#        - regions: ["us-east-1"]
#          oss: ["alinux2"]
#          instances: ["c5.xlarge"]
#          schedulers: ["slurm"]
